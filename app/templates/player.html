<script src="/socket.io/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
<script>
  var socket = io.connect('http://localhost:9090');
  socket.on('players', function (data) {
    if('{{position}}' in data){
        var player = data[{{position}}];
        $('#playerName').text(player.name);
        $('#lifeTotal').text(player.life);
        $('#commanderName').text(player.commander);
        $('#colorWheel > img').attr('src', '/static/mana/' + player.commanderInfo.manaIcon)
        $('#card').show();
        if(!$('#card').is(':visible')){
            $('#card').slideDown();
        }
    } else {
      console.log('Position not found, hiding card!');
      if($('#card').is(':visible')){
          $('#card').slideUp();
      }
    }
  });
</script>
<link href='http://fonts.googleapis.com/css?family=Josefin+Sans:700italic' rel='stylesheet' type='text/css'>
<style>
body, td{ font-family: 'Josefin Sans', sans-serif; color: white;}
#playerName{  font-size: 16px; }
#commanderName{ font-size: 12px; }
#lifeTotal{ font-size: 30px; text-align: right; padding-right: 10px; }
#colorWheel{ width: 50px;}
#card{
     border-radius: 90px 90px 90px 90px;
     -moz-border-radius: 90px 90px 90px 90px;
     -webkit-border-radius: 90px 90px 90px 90px;
     background:black;
}
</style>
<table width="400" id="card">
    <tr>
        <td id="colorWheel" rowspan="2">
            <img height="40" src="/static/mana/{{commanderInfo.manaIcon}}" />
        </td>
        <td id="playerName">{{name}}</td>
        <td id="lifeTotal" rowspan="2">{{life}}</td>
    </tr>
    <tr>
        <td id="commanderName">{{commander}}</td>
    </tr>
</table>
<script>
$(document).ready(function(){
  {% if blank %}
  $('#card').hide();
  {% endif %}
});
</script>